// schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model User {
  UserID        Int            @id @default(autoincrement())
  Name          String
  LastName      String
  Email         String         @unique
  Conversations Conversation[]
  Message       Message[]
}

model Conversation {
  ConversationID Int       @id @default(autoincrement())
  UserID         Int
  StartDate      DateTime
  User           User      @relation(fields: [UserID], references: [UserID])
  Messages       Message[]
}

model Message {
  MessageID      Int          @id @default(autoincrement())
  ConversationID Int
  UserID         Int?
  SendDate       DateTime
  Content        String
  Conversation   Conversation @relation(fields: [ConversationID], references: [ConversationID])
  User           User?        @relation(fields: [UserID], references: [UserID])
}
